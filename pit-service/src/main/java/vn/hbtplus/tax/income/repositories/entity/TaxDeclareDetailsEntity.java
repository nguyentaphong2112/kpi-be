/* * Copyright (C) 2022 HBTPlus. All rights reserved. * HBTPlus. Use is subject to license terms. */package vn.hbtplus.tax.income.repositories.entity;import lombok.Data;import vn.hbtplus.repositories.entity.BaseEntity;import vn.hbtplus.utils.Utils;import javax.persistence.*;import java.util.Date;import java.util.HashMap;import java.util.Map;/** * Lop entity ung voi bang pit_tax_declare_details * @author tudd * @since 1.0 * @version 1.0 */@Data@Entity@Table(name = "pit_tax_declare_details")public class TaxDeclareDetailsEntity extends BaseEntity {    @Id    @GeneratedValue(strategy = GenerationType.IDENTITY)    @Basic(optional = false)    @Column(name = "tax_declare_detail_id")    private Long taxDeclareDetailId;    @Column(name = "tax_period_date")    @Temporal(TemporalType.DATE)    private Date taxPeriodDate;    @Column(name = "emp_code")    private String empCode;    @Column(name = "emp_type_code")    private String empTypeCode;    @Column(name = "tax_method")    private String taxMethod;    @Column(name = "full_name")    private String fullName;    @Column(name = "tax_no")    private String taxNo;    @Column(name = "personal_id_no")    private String personalIdNo;    @Column(name = "income_taxable")    private Long incomeTaxable;    @Column(name = "income_free_tax")    private Long incomeFreeTax;    @Column(name = "insurance_deduction")    private Long insuranceDeduction;    @Column(name = "other_deduction")    private Long otherDeduction;    @Column(name = "income_tax")    private Long incomeTax;    @Column(name = "tax_collected")    private Long taxCollected;    @Column(name = "tax_payable")    private Long taxPayable;    @Column(name = "month_retro_tax")    private Long monthRetroTax;    @Column(name = "num_of_dependents")    private Integer numOfDependents;    @Column(name = "dependent_deduction")    private Long dependentDeduction;    @Column(name = "tax_declare_master_id")    private Long taxDeclareMasterId;    @Column(name = "note")    private String note;    @Column(name = "pos_name")    private String posName;    @Column(name = "declare_org_id")    private Long declareOrgId;    @Column(name = "work_org_id")    private Long workOrgId;    @Transient    private Map<String, Long> mapValues = new HashMap<>();    @Transient    private String incomeType;    public void add(TaxDeclareDetailsEntity item) {        if(!Utils.isNullOrEmpty(item.getEmpCode())){            this.empCode = item.getEmpCode();        }        this.incomeTaxable= Utils.NVL(this.incomeTaxable) + Utils.NVL(item.incomeTaxable);        this.insuranceDeduction= Utils.NVL(this.insuranceDeduction) + Utils.NVL(item.insuranceDeduction);        this.otherDeduction= Utils.NVL(this.otherDeduction) + Utils.NVL(item.otherDeduction);        this.incomeFreeTax= Utils.NVL(this.incomeFreeTax) + Utils.NVL(item.incomeFreeTax);        this.incomeTax= Utils.NVL(this.incomeTax) + Utils.NVL(item.incomeTax);        this.taxCollected= Utils.NVL(this.taxCollected) + Utils.NVL(item.taxCollected);        this.taxPayable= Utils.NVL(this.taxPayable) + Utils.NVL(item.taxPayable);        this.monthRetroTax= Utils.NVL(this.monthRetroTax) + Utils.NVL(item.monthRetroTax);        if(Utils.isNullOrEmpty(this.empCode)){            this.declareOrgId = item.declareOrgId;        }        mapValues.put(item.getIncomeType(),                Utils.NVL(item.incomeTaxable) + Utils.NVL(mapValues.get(item.getIncomeType())));    }    public void initMapValues() {        mapValues.put(incomeType, Utils.NVL(this.incomeTaxable));    }}